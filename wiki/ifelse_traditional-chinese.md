<!--
Meta Description: # R 語言中的 ifelse 函數：條件判斷的利器 ## 概述 `ifelse` 是 R 語言中的一個基本函數，用於進行條件判斷，根據給定條件返回不同的值。這個函數特別適合在向量化操作中使用，使得數據處理更為高效。 ## 文檔 ### 目的 `ifelse` 函數的主要目的是根據一個邏輯條件來返回...
Meta Keywords: ifelse, test, yes, score, 當條件為
-->

# R 語言中的 ifelse 函數：條件判斷的利器

## 概述
`ifelse` 是 R 語言中的一個基本函數，用於進行條件判斷，根據給定條件返回不同的值。這個函數特別適合在向量化操作中使用，使得數據處理更為高效。

## 文檔
### 目的
`ifelse` 函數的主要目的是根據一個邏輯條件來返回兩個可能的結果之一，從而使得用戶能夠根據特定條件進行數據的條件化處理。

### 使用方式
```R
ifelse(test, yes, no)
```

- **test**: 一個邏輯向量，表示條件判斷的結果。
- **yes**: 當條件為 `TRUE` 時返回的值，可以是向量或單一值。
- **no**: 當條件為 `FALSE` 時返回的值，也可以是向量或單一值。

### 詳細說明
`ifelse` 函數會根據 `test` 的邏輯值，返回 `yes` 或 `no` 中對應的值。這使得它特別適合於需要根據條件對數據進行分類或替換的情境。

## 範例
以下是 `ifelse` 函數的一些基本使用範例：

### 範例 1: 簡單條件判斷
```R
x <- c(1, 2, 3, 4, 5)
result <- ifelse(x %% 2 == 0, "偶數", "奇數")
print(result)
```
輸出：
```
[1] "奇數" "偶數" "奇數" "偶數" "奇數"
```

### 範例 2: 數據框中的條件判斷
```R
df <- data.frame(score = c(85, 60, 75, 90))
df$grade <- ifelse(df$score >= 75, "及格", "不及格")
print(df)
```
輸出：
```
  score grade
1    85  及格
2    60  不及格
3    75  及格
4    90  及格
```

## 解釋
在使用 `ifelse` 時，有一些常見的陷阱需要注意：
- **向量長度不匹配**：`yes` 和 `no` 的長度必須與 `test` 相同，否則會引發錯誤或返回不預期的結果。
- **NA 處理**：如果 `test` 向量中包含 NA 值，則相應的 `yes` 和 `no` 也必須考慮 NA 的情況，以避免不必要的錯誤。
- **性能**：雖然 `ifelse` 可以高效地處理向量，但對於非常大的數據集，使用 `dplyr` 或 `data.table` 等專門的數據處理工具可能會更有效率。

## 一句總結
`ifelse` 函數是 R 語言中進行條件判斷的高效工具，能夠根據邏輯條件返回不同的結果，適合用於向量化操作。